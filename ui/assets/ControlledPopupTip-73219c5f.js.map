{"version":3,"file":"ControlledPopupTip-73219c5f.js","sources":["../../../src/components/PopupTip/ControlledPopupTip.tsx"],"sourcesContent":["import { useLayoutEffect, FC, useState, useRef } from 'react';\n\nimport { SIZE_SMALL } from '#components/Icon/Icon.constants';\n\nimport {\n  getBB,\n  calculateTriggerClass,\n  calculatePosition,\n} from './PopupTip.helpers';\nimport { StyledIcon, Wrapper, Trigger, Body } from './PopupTip.styles';\nimport { Position, ControlledPopupTipProps } from './PopupTip.types';\n\nimport infoSVG from '#icons/info-outline-16.svg';\n\n/* color of trigger inherited from containing html */\n\nexport const ControlledPopupTip: FC<ControlledPopupTipProps> = ({\n  children,\n  isOpen,\n  svg = infoSVG,\n  id,\n  size = SIZE_SMALL,\n  className,\n}) => {\n  const [position, setPosition] = useState<Position>({ left: 0, top: 0 });\n  const [orientation, setOrientation] = useState('below');\n\n  const triggerRef = useRef(null);\n  const bodyRef = useRef(null);\n\n  useLayoutEffect(() => {\n    if (isOpen) {\n      const triggerRect = getBB(triggerRef);\n      const bodyRect = getBB(bodyRef);\n      const viewportWidth = document.documentElement.clientWidth;\n      const viewportHeight = document.documentElement.clientHeight;\n\n      const [left, top, orientation] = calculatePosition(\n        triggerRect,\n        bodyRect,\n        viewportWidth,\n        viewportHeight,\n      );\n\n      setPosition({ left, top });\n      setOrientation(orientation);\n    }\n  }, [isOpen]);\n\n  const triggerClass = calculateTriggerClass(isOpen, orientation);\n\n  return (\n    <Wrapper className={className}>\n      <Trigger className={triggerClass} ref={triggerRef} $size={size}>\n        <StyledIcon svg={svg} size={size} />\n      </Trigger>\n      {isOpen && (\n        <Body\n          id={id}\n          ref={bodyRef}\n          style={{\n            left: position.left,\n            top: position.top,\n          }}\n        >\n          {children}\n        </Body>\n      )}\n    </Wrapper>\n  );\n};\n"],"names":["ControlledPopupTip","__name","children","isOpen","infoSVG","id","SIZE_SMALL","position","setPosition","useState","orientation","setOrientation","triggerRef","useRef","bodyRef","useLayoutEffect","triggerRect","getBB","bodyRect","viewportWidth","viewportHeight","left","top","orientation2","calculatePosition","triggerClass","calculateTriggerClass","jsxs","Wrapper","className","jsx","Trigger","size","StyledIcon","svg","Body"],"mappings":"oWAgBO,MAAAA,EAAAC,EAAA,CAAA,CAAyD,SAAAC,EAC9DA,OAAAA,EACAC,IAAAA,EAAAA,EACMC,GAAAA,EACNC,KAAAA,EAAAA,EACOC,UAAAA,CAET,IAAA,CACE,KAAA,CAAAC,EAAAC,CAAA,EAAAC,WAAA,CAAmD,KAAA,EAAQ,IAAA,CAAQ,CAAA,EACnE,CAAAC,EAAAC,CAAA,EAAAF,EAAA,SAAA,OAAA,EAEAG,EAAAC,SAAA,IAAA,EACAC,EAAAD,SAAA,IAAA,EAEAE,EAAAA,gBAAAA,IAAAA,CACE,GAAAZ,EAAA,CACE,MAAAa,EAAAC,EAAAL,CAAA,EACAM,EAAAD,EAAAH,CAAA,EACAK,EAAA,SAAA,gBAAA,YACAC,EAAA,SAAA,gBAAA,aAEA,CAAAC,EAAAC,EAAAC,CAAA,EAAAC,EAAAR,EAAAE,EAAAC,EAAAC,CAAA,EAOAZ,EAAAA,CAAY,KAAAa,EAAEA,IAAAA,CAAMC,CAAAA,EACpBX,EAAAA,CAAAA,EACF,EAAA,CAAAR,CAAA,CAAA,EAGF,MAAAsB,EAAAC,EAAAvB,EAAAO,CAAA,EAEA,OAAAiB,OAAAC,EAAA,CAAA,UAAAC,EAAA,SAAA,CAEIC,EAAA,IAAAC,EAAA,CAAA,UAAAN,EAAA,IAAAb,EAAA,MAAAoB,EAAA,SAAAF,EAAA,IAAAG,EAAA,CAAA,IAAAC,EAAA,KAAAF,CAAA,CAAA,EAAA,EAEA7B,GAAA2B,EAAA,IAAAK,EAAA,CAAA,GAAA9B,EAAA,IAAAS,EAAA,MAAA,CAKW,KAAAP,EAAA,KACUc,IAAAA,EAAAA,GACDC,EAAAA,SAAAA,CAAAA,CAAAA,CAIlB,CAAA,CAAA,CAIR,EAtDO"}