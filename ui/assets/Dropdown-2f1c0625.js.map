{"version":3,"file":"Dropdown-2f1c0625.js","sources":["../../../src/components/Dropdown/Dropdown.hooks.js","../../../src/components/Dropdown/Dropdown.styles.js","../../../src/components/Dropdown/Dropdown.types.js","../../../src/components/Dropdown/Dropdown.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\n\nexport const useOverflowHidden = (contentEl, isOpen) => {\n  const [isOverflowHidden, setIsOverflowHidden] = useState(true);\n\n  useEffect(() => {\n    function handleOpened() {\n      setIsOverflowHidden(false);\n    }\n\n    if (isOpen) {\n      contentEl?.addEventListener('transitionend', handleOpened, {\n        once: true,\n      });\n    } else {\n      setIsOverflowHidden(true);\n    }\n\n    return () => {\n      setIsOverflowHidden(true);\n      contentEl?.removeEventListener('transitionend', handleOpened);\n    };\n  }, [isOpen, contentEl]);\n\n  return isOverflowHidden;\n};\n","import { styled } from 'styled-components';\n\nexport const Boundary = styled.div``;\n\nexport const Trigger = styled.div`\n  --color: ${({ theme }) => theme.color.ink.base};\n  color: var(--dropdown-trigger-color, --color);\n  cursor: pointer;\n\n  &[aria-disabled='true'] {\n    --dropdown-trigger-color: ${({ theme }) =>\n      theme.color.actionBrand.disabled};\n  }\n`;\n\nexport const Content = styled.div`\n  overflow: ${({ $isOverflowHidden }) =>\n    $isOverflowHidden ? 'hidden' : 'visible'};\n  max-height: var(--dropdown-content-initial-height, 0);\n  transition: ${({ theme }) => theme.transition.dropdown};\n\n  [aria-expanded='true'] + & {\n    max-height: ${({ $height }) => $height};\n  }\n`;\n","import { PropTypes } from 'prop-types';\n\nexport const propTypes = {\n  /** Custom classname for the dropdown */\n  className: PropTypes.string,\n  /** Unique identifier for the dropdown */\n  id: PropTypes.string,\n  /** The trigger of the dropdown */\n  trigger: PropTypes.oneOfType([PropTypes.string, PropTypes.node]).isRequired,\n  /** The content which is hidden by the dropdown */\n  children: PropTypes.node.isRequired,\n  /** Whether the dropdown is open or not */\n  isOpen: PropTypes.bool,\n  /** Whether the dropdown is disabled or not */\n  disabled: PropTypes.bool,\n  /** Function to be called when the dropdown is interacted with */\n  onInteract: PropTypes.func,\n};\n","import { useEffect, useCallback, useRef, useState } from 'react';\n\nimport { useOverflowHidden } from './Dropdown.hooks';\nimport { Boundary, Trigger, Content } from './Dropdown.styles';\nimport { propTypes } from './Dropdown.types';\n\n/**\n * A simple dropdown for toggling the visibility of content through interacting with a trigger\n */\nconst Dropdown = ({\n  id,\n  className,\n  trigger,\n  children,\n  isOpen = false,\n  disabled = false,\n  onInteract,\n}) => {\n  const [height, setHeight] = useState('min-content');\n\n  const triggerId = `__dropdown_${id}_trigger__`;\n  const contentId = `__dropdown_${id}_content__`;\n  const contentRef = useRef(null);\n  const contentEl = contentRef.current;\n\n  const updateSize = useCallback(() => {\n    setHeight(`${contentEl?.scrollHeight || 0}px`);\n  }, [contentEl]);\n\n  useEffect(() => {\n    updateSize();\n  }, [children, contentEl, updateSize]);\n\n  useEffect(() => {\n    window.addEventListener('resize', updateSize);\n    return () => window.removeEventListener('resize', updateSize);\n  }, [updateSize]);\n\n  const isOverflowHidden = useOverflowHidden(contentRef.current, isOpen);\n\n  const handleInteract = useCallback(\n    (event) => {\n      const isLink = event.target.closest('a') !== null;\n      const isKey = (k) => event.key === k;\n\n      if (\n        isLink ||\n        disabled ||\n        !(isKey('Enter') || isKey(' ') || isKey(undefined))\n      ) {\n        return;\n      }\n\n      onInteract && onInteract();\n    },\n    [onInteract, disabled],\n  );\n\n  return (\n    <Boundary id={id} className={className}>\n      {trigger && (\n        <Trigger\n          id={triggerId}\n          role=\"button\"\n          aria-controls={contentId}\n          aria-expanded={isOpen}\n          aria-disabled={disabled}\n          onClick={handleInteract}\n          onKeyDown={handleInteract}\n          tabIndex=\"0\"\n        >\n          {trigger}\n        </Trigger>\n      )}\n      {children && (\n        <Content\n          $isOverflowHidden={isOverflowHidden}\n          id={contentId}\n          aria-labelledby={triggerId}\n          ref={contentRef}\n          $height={height}\n        >\n          {children}\n        </Content>\n      )}\n    </Boundary>\n  );\n};\n\nDropdown.propTypes = propTypes;\n\nexport default Dropdown;\n\n/**\n * A simple dropdown for toggling the visibility of content through interacting with a title\n * Only respects the isOpen prop on initial render\n */\nexport const DropdownStateful = ({ defaultOpen = false, ...props }) => {\n  const [isOpen, setIsOpen] = useState(defaultOpen);\n\n  const onInteract = () => setIsOpen((isOpen) => !isOpen);\n\n  return <Dropdown {...props} isOpen={isOpen} onInteract={onInteract} />;\n};\n\nDropdownStateful.propTypes = propTypes;\n"],"names":["useOverflowHidden","contentEl","isOpen","isOverflowHidden","setIsOverflowHidden","useState","useEffect","handleOpened","addEventListener","once","removeEventListener","Boundary","styled","div","withConfig","componentId","Trigger","theme","color","ink","base","actionBrand","disabled","Content","$isOverflowHidden","transition","dropdown","$height","propTypes","className","PropTypes","string","id","trigger","oneOfType","node","isRequired","children","bool","onInteract","func","Dropdown","height","setHeight","triggerId","contentId","contentRef","useRef","current","updateSize","useCallback","scrollHeight","window","handleInteract","event","isLink","target","closest","isKey","k","key","undefined","jsxs","jsx","Dropdown$1","DropdownStateful","defaultOpen","props","setIsOpen"],"mappings":"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"}