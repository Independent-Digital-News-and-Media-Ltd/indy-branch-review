{"version":3,"file":"PopupTip-a63cb3e1.js","sources":["../../../src/components/PopupTip/PopupTip.tsx"],"sourcesContent":["import { useLayoutEffect, FC, useState, useRef } from 'react';\n\nimport { SIZE_SMALL } from '#components/Icon/Icon.constants';\n\nimport { icon } from '#theme/dimensions/base';\n\nimport { GAP, ARROW_HEIGHT, ARROW_WIDTH } from './PopupTip.constants';\nimport {\n  getBB,\n  calculateTriggerClass,\n  calculatePosition,\n} from './PopupTip.helpers';\nimport { StyledIcon, Wrapper, Trigger, Body } from './PopupTip.styles';\nimport { Position, PopupTipProps } from './PopupTip.types';\n\nimport infoSVG from '#icons/info-outline-16.svg';\n\n/* color of trigger inherited from containing html */\n\nexport const PopupTip: FC<PopupTipProps> = ({\n  children,\n  svg = infoSVG,\n  size = SIZE_SMALL,\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [position, setPosition] = useState<Position>({ left: 0, top: 0 });\n  const [orientation, setOrientation] = useState('below');\n\n  const triggerRef = useRef(null);\n  const bodyRef = useRef(null);\n\n  const triggerWidth = icon[size].width;\n\n  useLayoutEffect(() => {\n    if (isOpen) {\n      const triggerRect = getBB(triggerRef);\n      const bodyRect = getBB(bodyRef);\n      const viewportWidth = document.documentElement.clientWidth;\n      const viewportHeight = document.documentElement.clientHeight;\n\n      const [left, top, orientation] = calculatePosition(\n        triggerRect,\n        bodyRect,\n        viewportWidth,\n        viewportHeight,\n      );\n\n      setPosition({ left, top });\n      setOrientation(orientation);\n    }\n  }, [isOpen]);\n\n  const triggerClass = calculateTriggerClass(isOpen, orientation);\n\n  function onFocus() {\n    setIsOpen(true);\n  }\n\n  function onBlur() {\n    setIsOpen(false);\n  }\n\n  function onMouseOver() {\n    setIsOpen(true);\n  }\n\n  function onMouseOut() {\n    setIsOpen(false);\n  }\n\n  return (\n    <Wrapper>\n      <Trigger\n        className={triggerClass}\n        tabIndex={0}\n        ref={triggerRef}\n        $gap={GAP}\n        $triggerwidth={triggerWidth}\n        $arrowheight={ARROW_HEIGHT}\n        $arrowwidth={ARROW_WIDTH}\n        onFocus={onFocus}\n        onMouseOver={onMouseOver}\n        onMouseOut={onMouseOut}\n        onBlur={onBlur}\n      >\n        <StyledIcon svg={svg} size={size} />\n      </Trigger>\n      {isOpen && (\n        <Body\n          ref={bodyRef}\n          style={{\n            left: position.left,\n            top: position.top,\n          }}\n        >\n          {children}\n        </Body>\n      )}\n    </Wrapper>\n  );\n};\n"],"names":["PopupTip","__name","children","infoSVG","isOpen","setIsOpen","useState","position","setPosition","orientation","setOrientation","triggerRef","useRef","bodyRef","triggerWidth","icon","size","useLayoutEffect","triggerRect","getBB","bodyRect","viewportWidth","viewportHeight","left","top","orientation2","calculatePosition","triggerClass","calculateTriggerClass","onFocus","onBlur","onMouseOver","onMouseOut","jsxs","Wrapper","jsx","Trigger","GAP","ARROW_HEIGHT","ARROW_WIDTH","StyledIcon","svg","Body"],"mappings":"6ZAmBO,MAAAA,EAAAC,EAAA,CAAA,CAAqC,SAAAC,EAC1CA,IAAAA,EAAAA,EACMC,KAAAA,EAAAA,CAER,IAAA,CACE,KAAA,CAAAC,EAAAC,CAAA,EAAAC,EAAA,SAAA,EAAA,EACA,CAAAC,EAAAC,CAAA,EAAAF,WAAA,CAAmD,KAAA,EAAQ,IAAA,CAAQ,CAAA,EACnE,CAAAG,EAAAC,CAAA,EAAAJ,EAAA,SAAA,OAAA,EAEAK,EAAAC,SAAA,IAAA,EACAC,EAAAD,SAAA,IAAA,EAEAE,EAAAC,EAAAC,CAAA,EAAA,MAEAC,EAAAA,gBAAAA,IAAAA,CACE,GAAAb,EAAA,CACE,MAAAc,EAAAC,EAAAR,CAAA,EACAS,EAAAD,EAAAN,CAAA,EACAQ,EAAA,SAAA,gBAAA,YACAC,EAAA,SAAA,gBAAA,aAEA,CAAAC,EAAAC,EAAAC,CAAA,EAAAC,EAAAR,EAAAE,EAAAC,EAAAC,CAAA,EAOAd,EAAAA,CAAY,KAAAe,EAAEA,IAAAA,CAAMC,CAAAA,EACpBd,EAAAA,CAAAA,EACF,EAAA,CAAAN,CAAA,CAAA,EAGF,MAAAuB,EAAAC,EAAAxB,EAAAK,CAAA,EAEA,SAAAoB,GAAA,CACExB,EAAAA,EAAAA,CAAc,CADhBJ,EAAA4B,EAAA,WAIA,SAAAC,GAAA,CACEzB,EAAAA,EAAAA,CAAe,CADjBJ,EAAA6B,EAAA,UAIA,SAAAC,GAAA,CACE1B,EAAAA,EAAAA,CAAc,CADhBJ,EAAA8B,EAAA,eAIA,SAAAC,GAAA,CACE3B,EAAAA,EAAAA,CAAe,CADjB,OAAAJ,EAAA+B,EAAA,cAIAC,EAAA,KAAAC,EAAA,CAAA,SAAA,CAEIC,EAAAA,IAAAC,EAAA,CAAA,UAAAT,EAAA,SAAA,EAAA,IAAAhB,EAAA,KAAA0B,EAAA,cAAAvB,EAAA,aAAAwB,EAAA,YAAAC,EAAA,QAAAV,EAAA,YAAAE,EAAA,WAAAC,EAAA,OAAAF,EAAA,SAAAK,EAAAA,IAAAK,EAAA,CAAA,IAAAC,EAAA,KAAAzB,CAAA,CAAA,CAAA,CAAA,EAcAZ,GAAA+B,EAAA,IAAAO,EAAA,CAAA,IAAA7B,EAAA,MAAA,CAIW,KAAAN,EAAA,KACUgB,IAAAA,EAAAA,GACDC,EAAAA,SAAAA,CAAAA,CAAAA,CAIlB,CAAA,CAAA,CAIR,EAjFO"}