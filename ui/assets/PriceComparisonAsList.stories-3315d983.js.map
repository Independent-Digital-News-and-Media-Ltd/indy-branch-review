{"version":3,"file":"PriceComparisonAsList.stories-3315d983.js","sources":["../../../src/components/PriceComparison/PriceComparisonAsList/PriceComparisonAsList.styles.ts","../../../src/components/PriceComparison/PriceComparisonAsList/Wrapper.tsx","../../../src/components/PriceComparison/PriceComparisonAsList/Fallback.tsx","../../../src/components/PriceComparison/PriceComparisonAsList/Item.tsx","../../../src/components/PriceComparison/PriceComparisonAsList/PriceComparisonAsList.constants.ts","../../../src/components/PriceComparison/PriceComparisonAsList/Loading.tsx","../../../src/components/PriceComparison/PriceComparisonAsList/PriceComparisonAsList.tsx"],"sourcesContent":["import { styled } from 'styled-components';\n\nimport Dropdown, { Content as DropdownContent } from '#components/Dropdown';\nimport Icon from '#components/Icon';\n\nimport clampLines from '#utils/clampLines';\nimport { hex2rgba } from '#utils/colors';\n\nexport const Wrapper = styled.div`\n  --line-height: 20px;\n  --row-padding-x: ${({ theme }) => theme.spacing.x1_5}px;\n  --row-bg: ${({ theme }) => theme.color.canvas.base};\n  --row-bg-transparent: ${({ theme }) => hex2rgba(theme.color.canvas.base, 0)};\n  --main-bg: ${({ theme }) => theme.color.canvas.secondary};\n  --dropdown-content-initial-height: 99px;\n  display: flex;\n  flex-direction: column;\n  gap: ${({ theme }) => theme.spacing.x1};\n  padding: ${({ theme }) => theme.spacing.x0_5}px;\n  padding-top: ${({ theme }) => theme.spacing.x1}px;\n  background-color: var(--main-bg);\n  color: ${({ theme }) => theme.color.ink.base};\n  font: 16px / var(--line-height)\n    ${({ theme }) => theme.fontFamily.secondaryFont};\n`;\n\nexport const Title = styled.h3`\n  padding: 0 var(--row-padding-x);\n  margin: 0;\n  font: inherit;\n  font-weight: bold;\n  ${clampLines(1, '--line-height', true)};\n`;\n\n/**\n * @todo fix instance where icon is not visible âˆ´ not added to Symbols during\n * CSR\n */\nexport const ShowMore = styled.span`\n  --height: 24px;\n  display: flex;\n  position: absolute;\n  bottom: 0;\n  left: 0;\n  width: 100%;\n  height: var(--height);\n  align-items: center;\n  justify-content: center;\n  gap: ${({ theme }) => theme.dimension.btn.iconSpacing}px;\n  background: var(--main-bg);\n  font: normal 16px/20px ${({ theme }) => theme.fontFamily.secondaryFont};\n  opacity: 1;\n  transition: ${({ theme }) => theme.transition.readMoreTrigger};\n\n  &::after {\n    --fade-from: var(--main-bg);\n    --fade-to: var(--row-bg-transparent);\n    display: block;\n    position: absolute;\n    bottom: 100%;\n    width: 100%;\n    height: 100%;\n    background-image: linear-gradient(0deg, var(--fade-from), var(--fade-to));\n    content: '';\n  }\n`;\n\n/* Show more button */\n\nexport const ChevronIcon = styled(Icon)``;\n\n/* Dropdown */\n\nexport const CustomDropdown = styled(Dropdown)`\n  position: relative;\n\n  ${DropdownContent} {\n    min-height: var(--dropdown-content-initial-height);\n  }\n\n  ${ShowMore} {\n    position: absolute;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    opacity: ${({ isOpen }) => (isOpen ? 0 : 1)};\n    pointer-events: ${({ isOpen }) => (isOpen ? 'none' : 'auto')};\n  }\n`;\n\nexport const Content = styled.div`\n  display: flex;\n  height: var(--dropdown-content-initial-height);\n  flex-direction: column;\n`;\n\n/* Merchant list */\n\nexport const List = styled.ol`\n  display: flex;\n  flex-direction: column;\n  gap: 3px;\n  padding: 0;\n  margin: 0;\n  list-style: none;\n`;\n\nexport const Item = styled.li`\n  display: flex;\n  flex-flow: row nowrap;\n  align-items: center;\n  gap: ${({ theme }) => theme.spacing.x3};\n  padding: ${({ theme }) => theme.spacing.x1}px var(--row-padding-x);\n  background-color: var(--row-bg);\n  font: inherit;\n\n  sup {\n    vertical-align: top;\n  }\n`;\n\nexport const Merchant = styled.div`\n  display: block;\n  overflow: hidden;\n  margin: 0;\n  margin-right: auto;\n  font-weight: normal;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n`;\n\nexport const Options = styled.div`\n  display: flex;\n  align-items: center;\n  gap: ${({ theme }) => theme.spacing.x2}px;\n  font-weight: bold;\n  white-space: nowrap;\n`;\n\nexport const Price = styled.div`\n  sup {\n    line-height: 1;\n  }\n`;\n\nexport const CTA = styled.a`\n  /*\n    This is a hack for now. The button has the 'styles' of a tertiary button\n    but with the layout of a link.\n  */\n  text-decoration: underline;\n`;\n\n/* Notice */\n\nexport const Notice = styled.p`\n  margin: auto ${({ theme }) => theme.spacing.x1_5}px;\n  text-align: right;\n\n  &,\n  & small {\n    font: 15px/20px ${({ theme }) => theme.fontFamily.secondaryFont};\n  }\n`;\n","import { FC } from 'react';\n\nimport {\n  Wrapper as StyledWrapper,\n  Title,\n  Content,\n} from './PriceComparisonAsList.styles';\n\nconst Wrapper: FC<{ title: string; children: Children }> = ({\n  title,\n  children,\n}) => (\n  <StyledWrapper>\n    <Title>{title}</Title>\n    <Content>{children}</Content>\n  </StyledWrapper>\n);\n\nexport default Wrapper;\n","import { FC } from 'react';\n\nimport { ERROR_SUPPLEMENTAL } from '../PriceComparison.constants';\nimport { ListFallbackProps } from '../PriceComparison.types';\n\nimport { Notice } from './PriceComparisonAsList.styles';\nimport Wrapper from './Wrapper';\n\nconst Fallback: FC<ListFallbackProps> = ({ title, children }) => (\n  <Wrapper title={title}>\n    {children}\n    <Notice>\n      <small>{ERROR_SUPPLEMENTAL}</small>\n    </Notice>\n  </Wrapper>\n);\n\nexport default Fallback;\n","import { FC } from 'react';\n\nimport { getPriceWithoutDecimals } from '#utils/currency';\n\nimport { ItemProps } from '../PriceComparison.types';\n\nimport {\n  Item as StyledItem,\n  Merchant,\n  Options,\n  Price,\n  CTA,\n} from './PriceComparisonAsList.styles';\n\nconst Item: FC<ItemProps> = ({ merchant, price, link, onClick }) => (\n  <StyledItem>\n    <Merchant>{merchant}</Merchant>\n    <Options>\n      <Price>{getPriceWithoutDecimals(price)}</Price>\n      <CTA href={link} target=\"_blank\" rel=\"noreferrer\" onClick={onClick}>\n        Buy now\n      </CTA>\n    </Options>\n  </StyledItem>\n);\n\nexport default Item;\n","export const TITLE = 'Latest deals on';\nexport const LOADING_TITLE = 'Searching best prices';\nexport const SHOW_MORE = 'Show more prices';\n","import { FC } from 'react';\n\nimport LoadingEllipsis from '#components/LoadingEllipsis';\n\nimport { LoadingProps } from '../PriceComparison.types';\n\nimport { LOADING_TITLE } from './PriceComparisonAsList.constants';\nimport Wrapper from './Wrapper';\n\nconst Loading: FC<LoadingProps> = ({ title = LOADING_TITLE }) => (\n  <Wrapper title={title}>\n    <LoadingEllipsis />\n  </Wrapper>\n);\n\nexport default Loading;\n","import { FC, useEffect, useState } from 'react';\n\nimport { SIZE_SMALL as ICON_SIZE_SMALL } from '#components/Icon/Icon.constants';\n\nimport { OFFERS_LIMIT } from '../PriceComparison.constants';\n\nimport Fallback from './Fallback';\nimport Item from './Item';\nimport Loading from './Loading';\nimport { TITLE, SHOW_MORE } from './PriceComparisonAsList.constants';\nimport {\n  Wrapper,\n  Title,\n  List,\n  Content,\n  CustomDropdown,\n  ShowMore,\n  ChevronIcon,\n} from './PriceComparisonAsList.styles';\nimport { PriceComparisonAsListProps } from './PriceComparisonAsList.types';\n\nimport ChevronDownSvg from '#icons/chevron-down-solid-16.svg';\n\nconst PriceComparisonAsList: FC<PriceComparisonAsListProps> = ({\n  className,\n  productName,\n  items,\n  isLoading,\n  isLive,\n  onBuyNowClick,\n}) => {\n  const title = `${TITLE} ${productName}`;\n  const [isOpen, setIsOpen] = useState(items?.length < OFFERS_LIMIT);\n  const onInteract = () => setIsOpen((isOpen) => !isOpen);\n\n  /**\n   * @todo only employ dropdown when the component is within the viewport\n   * when it loads, otherwise setIsOpen(false)\n   */\n  const isSingleItem = items?.length < 2;\n\n  const content = (\n    <List>\n      {items.map(({ merchant, price, link }, i) => (\n        <Item\n          key={i}\n          merchant={merchant}\n          price={price}\n          link={link}\n          onClick={() => onBuyNowClick && onBuyNowClick(i, price)}\n        />\n      ))}\n    </List>\n  );\n\n  useEffect(() => {\n    setIsOpen(items?.length < OFFERS_LIMIT);\n  }, [items]);\n\n  if (isLoading) {\n    return <Loading />;\n  }\n\n  if (!isLive) {\n    return <Fallback title={title}>{content}</Fallback>;\n  }\n\n  return (\n    <Wrapper className={className}>\n      <Title>{title}</Title>\n      {isSingleItem ? (\n        <Content>{content}</Content>\n      ) : (\n        <CustomDropdown\n          /* @todo: add id in here */\n          isOpen={isOpen}\n          onInteract={onInteract}\n          trigger={\n            <ShowMore>\n              {SHOW_MORE}\n              <ChevronIcon svg={ChevronDownSvg} size={ICON_SIZE_SMALL} />\n            </ShowMore>\n          }\n        >\n          {content}\n        </CustomDropdown>\n      )}\n    </Wrapper>\n  );\n};\n\nexport default PriceComparisonAsList;\n"],"names":["Wrapper","styled","div","withConfig","componentId","theme","spacing","x1_5","color","canvas","base","hex2rgba","secondary","x1","x0_5","ink","fontFamily","secondaryFont","Title","h3","clampLines","ShowMore","span","dimension","btn","iconSpacing","transition","readMoreTrigger","ChevronIcon","Icon","CustomDropdown","Dropdown","DropdownContent","isOpen","Content","List","ol","Item","li","x3","Merchant","Options","x2","Price","CTA","a","Notice","p","__name","title","jsxs","StyledWrapper","jsx","children","Fallback","merchant","price","link","StyledItem","getPriceWithoutDecimals","onClick","TITLE","LOADING_TITLE","SHOW_MORE","Loading","LoadingEllipsis","PriceComparisonAsList","className","productName","items","isLoading","isLive","setIsOpen","useState","OFFERS_LIMIT","onInteract","isOpen2","isSingleItem","content","useEffect"],"mappings":"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"}